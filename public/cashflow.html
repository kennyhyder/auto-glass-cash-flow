<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Glass - Integrated Cash Flow Management</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #2563eb; --secondary: #10b981; --danger: #ef4444;
            --warning: #f59e0b; --dark: #1f2937; --gray: #6b7280;
            --light: #f3f4f6; --white: #ffffff;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f9fafb; min-height: 100vh; }
        .header { background: var(--white); border-bottom: 1px solid #e5e7eb; padding: 15px 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .header-content { max-width: 1600px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .header h1 { font-size: 1.5rem; color: var(--dark); }
        .container { max-width: 1600px; margin: 20px auto; padding: 0 20px; }
        .tabs { display: flex; gap: 5px; margin-bottom: 20px; background: var(--white); padding: 10px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); flex-wrap: wrap; }
        .tab { padding: 12px 20px; background: none; border: none; cursor: pointer; font-weight: 600; color: var(--gray); transition: all 0.2s; border-radius: 8px; font-size: 0.9rem; }
        .tab:hover { background: var(--light); }
        .tab.active { background: var(--primary); color: var(--white); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .metric-card { background: var(--white); border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .metric-label { font-size: 0.75rem; color: var(--gray); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }
        .metric-value { font-size: 1.8rem; font-weight: 700; color: var(--dark); }
        .metric-change { font-size: 0.875rem; margin-top: 8px; color: var(--gray); }
        .card { background: var(--white); border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .card-title { font-size: 1.25rem; font-weight: 600; color: var(--dark); margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .data-table { width: 100%; border-collapse: collapse; overflow-x: auto; display: block; }
        .data-table thead { background: var(--light); }
        .data-table th { padding: 12px; text-align: left; font-weight: 600; font-size: 0.75rem; color: var(--dark); text-transform: uppercase; }
        .data-table td { padding: 12px; border-bottom: 1px solid #e5e7eb; font-size: 0.875rem; }
        .data-table tbody tr:hover { background: var(--light); }
        .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; }
        .status-paid { background: #d1fae5; color: #065f46; }
        .status-pending { background: #fed7aa; color: #92400e; }
        .btn { padding: 10px 20px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; font-size: 0.875rem; }
        .btn-primary { background: var(--primary); color: var(--white); }
        .btn-primary:hover { background: #1d4ed8; }
        .alert { padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .alert-warning { background: #fef3c7; color: #92400e; border-left: 4px solid var(--warning); }
        .alert-success { background: #d1fae5; color: #065f46; border-left: 4px solid var(--secondary); }
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; padding: 20px; background: var(--light); border-radius: 12px; margin-bottom: 20px; }
        .summary-item { text-align: center; }
        .summary-label { font-size: 0.7rem; color: var(--gray); text-transform: uppercase; margin-bottom: 5px; }
        .summary-value { font-size: 1.3rem; font-weight: 700; color: var(--dark); }
        .chart-container { height: 350px; margin-top: 20px; position: relative; }
        .payment-item { display: grid; grid-template-columns: 80px 1fr 100px 100px 90px; gap: 15px; padding: 15px; background: var(--light); border-radius: 8px; align-items: center; margin-bottom: 10px; }
        .payment-date { font-weight: 600; color: var(--dark); font-size: 0.875rem; }
        .payment-amount { font-weight: 700; text-align: right; }
        .payment-amount.debit { color: var(--danger); }
        @media (max-width: 768px) {
            .header h1 { font-size: 1.2rem; }
            .payment-item { grid-template-columns: 1fr; gap: 8px; }
            .data-table { font-size: 0.75rem; }
            .data-table th, .data-table td { padding: 8px; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>üí∞ Auto Glass Cash Flow Management</h1>
            <button class="btn btn-primary" onclick="alert('Data import coming soon!')">üìÅ Import Data</button>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard')">Dashboard</button>
            <button class="tab" onclick="switchTab('overhead')">Static Overhead</button>
            <button class="tab" onclick="switchTab('forecast')">Forecast</button>
            <button class="tab" onclick="switchTab('analysis')">Analysis</button>
        </div>

        <div id="dashboard-tab" class="tab-content active">
            <div class="dashboard-grid">
                <div class="metric-card">
                    <div class="metric-label">Current Cash</div>
                    <div class="metric-value">$45,320</div>
                    <div class="metric-change">Updated: Today</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Weekly Due</div>
                    <div class="metric-value">$32,456</div>
                    <div class="metric-change">15 payments</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Monthly Revenue</div>
                    <div class="metric-value" style="color: var(--secondary)">$272,316</div>
                    <div class="metric-change">5-month average</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Net Profit</div>
                    <div class="metric-value" style="color: var(--secondary)">$110,208</div>
                    <div class="metric-change">40.5% margin</div>
                </div>
            </div>

            <div class="card">
                <div class="card-title"><span>üìä Cash Flow Summary</span></div>
                <div class="summary-grid">
                    <div class="summary-item"><div class="summary-label">Overhead</div><div class="summary-value">$32,642</div></div>
                    <div class="summary-item"><div class="summary-label">Payroll</div><div class="summary-value">$50,000</div></div>
                    <div class="summary-item"><div class="summary-label">COGS</div><div class="summary-value">$45,000</div></div>
                    <div class="summary-item"><div class="summary-label">Gross Margin</div><div class="summary-value">52.46%</div></div>
                </div>
            </div>

            <div class="alert alert-success">
                <span>‚úÖ</span>
                <div><strong>Excellent Performance!</strong> Your business maintains a 52.46% gross margin with only 12% overhead ratio.</div>
            </div>

            <div class="alert alert-warning">
                <span>‚ö†Ô∏è</span>
                <div><strong>Payment Alert:</strong> Heavy payment concentration on the 15th ($10,797). Consider negotiating payment dates.</div>
            </div>

            <div class="card">
                <div class="card-title">üìÖ Upcoming Payments (Next 7 Days)</div>
                <div class="payment-item">
                    <div class="payment-date">Oct 1</div>
                    <div>Office Rent (1st)</div>
                    <div>Overhead</div>
                    <div class="payment-amount debit">$1,545</div>
                    <div><span class="status-badge status-pending">Due Today</span></div>
                </div>
                <div class="payment-item">
                    <div class="payment-date">Oct 1</div>
                    <div>SBA Loan Payment</div>
                    <div>Debt</div>
                    <div class="payment-amount debit">$2,268</div>
                    <div><span class="status-badge status-pending">Due Today</span></div>
                </div>
                <div class="payment-item">
                    <div class="payment-date">Oct 5</div>
                    <div>Payroll (5th)</div>
                    <div>Payroll</div>
                    <div class="payment-amount debit">$25,000</div>
                    <div><span class="status-badge status-paid">In 4 days</span></div>
                </div>
            </div>
        </div>

        <div id="overhead-tab" class="tab-content">
            <div class="card">
                <div class="card-title">
                    <span>üìã Fixed Monthly Overhead</span>
                    <span style="font-size: 1rem;">Total: <strong>$32,641.64</strong></span>
                </div>
                <table class="data-table">
                    <thead>
                        <tr><th>Day</th><th>Payment Name</th><th>Amount</th><th>Category</th><th>Auto-Pay</th><th>Status</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>Office Rent (1st)</td><td>$1,545.48</td><td>Rent</td><td>‚úì Yes</td><td><span class="status-badge status-paid">Paid</span></td></tr>
                        <tr><td>1</td><td>SBA Loan</td><td>$2,268.00</td><td>Debt</td><td>‚úì Yes</td><td><span class="status-badge status-paid">Paid</span></td></tr>
                        <tr><td>8</td><td>Vonage</td><td>$378.00</td><td>Phone</td><td>‚úì Yes</td><td><span class="status-badge status-pending">Pending</span></td></tr>
                        <tr><td>10</td><td>Office Rent (10th)</td><td>$1,545.48</td><td>Rent</td><td>‚úì Yes</td><td><span class="status-badge status-pending">Pending</span></td></tr>
                        <tr><td>15</td><td>Marketing</td><td>$5,000.00</td><td>Marketing</td><td>No</td><td><span class="status-badge status-pending">Pending</span></td></tr>
                        <tr><td>15</td><td>Kemper Insurance</td><td>$3,206.84</td><td>Insurance</td><td>‚úì Yes</td><td><span class="status-badge status-pending">Pending</span></td></tr>
                        <tr><td>20</td><td>Office Rent (20th)</td><td>$1,545.48</td><td>Rent</td><td>‚úì Yes</td><td><span class="status-badge status-pending">Pending</span></td></tr>
                        <tr><td>25</td><td>Glassbiller</td><td>$2,210.00</td><td>Software</td><td>‚úì Yes</td><td><span class="status-badge status-pending">Pending</span></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="forecast-tab" class="tab-content">
            <div class="card">
                <div class="card-title">üìà 30-Day Cash Flow Forecast</div>
                <div class="chart-container"><canvas id="forecastChart"></canvas></div>
            </div>
        </div>

        <div id="analysis-tab" class="tab-content">
            <div class="card">
                <div class="card-title">üìä Expense Analysis by Category</div>
                <div class="chart-container"><canvas id="categoryChart"></canvas></div>
            </div>
            <div class="card">
                <div class="card-title">üìÖ Payment Distribution by Day</div>
                <div class="chart-container"><canvas id="distributionChart"></canvas></div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
            if (tabName === 'forecast') setTimeout(initForecastChart, 100);
            if (tabName === 'analysis') setTimeout(() => { initCategoryChart(); initDistributionChart(); }, 100);
        }

        function initForecastChart() {
            const canvas = document.getElementById('forecastChart');
            if (!canvas || canvas.chart) return;
            const ctx = canvas.getContext('2d');
            const labels = [], data = [];
            let balance = 45320;
            for (let i = 0; i < 30; i++) {
                const date = new Date();
                date.setDate(date.getDate() + i);
                labels.push((date.getMonth() + 1) + '/' + date.getDate());
                balance += 9077;
                if ([1, 5, 10, 15, 20, 25].includes(date.getDate())) balance -= 5000;
                data.push(balance);
            }
            canvas.chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Projected Cash Balance',
                        data: data,
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });
        }

        function initCategoryChart() {
            const canvas = document.getElementById('categoryChart');
            if (!canvas || canvas.chart) return;
            const ctx = canvas.getContext('2d');
            canvas.chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Overhead', 'Payroll', 'COGS', 'Taxes'],
                    datasets: [{
                        data: [32642, 50000, 45000, 15000],
                        backgroundColor: ['#2563eb', '#10b981', '#f59e0b', '#ef4444']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        }

        function initDistributionChart() {
            const canvas = document.getElementById('distributionChart');
            if (!canvas || canvas.chart) return;
            const ctx = canvas.getContext('2d');
            const dayTotals = Array(31).fill(0);
            dayTotals[0] = 3858; dayTotals[4] = 25000; dayTotals[14] = 10797; dayTotals[19] = 4615;
            canvas.chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Array.from({length: 31}, (_, i) => i + 1),
                    datasets: [{
                        label: 'Daily Payment Obligations',
                        data: dayTotals,
                        backgroundColor: function(context) {
                            const v = context.parsed.y;
                            return v > 10000 ? '#ef4444' : v > 5000 ? '#f59e0b' : v > 0 ? '#10b981' : '#e5e7eb';
                        }
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });
        }
    </script>
</body>
</html>
